-- Create table de BD Livraria

CREATE  TABLE  AUTOR(
	AUTORID SERIAL PRIMARY KEY,
	NOME 	VARCHAR(250)NOT NULL,
	SEXO	VARCHAR(2),
	NACIONALIDADE VARCHAR(30),
	DATANASCIMENTO DATE
);

CREATE  TABLE  CATEGORIA(
	CATEGORIAID SERIAL PRIMARY KEY,
	DESCRICAO 	VARCHAR(250)NOT NULL
);

CREATE  TABLE  USUARIO(
	USERID SERIAL PRIMARY KEY,
	NOME 	VARCHAR(250)NOT NULL,
	EMAIL	VARCHAR(250),
	CELULAR VARCHAR(30),
	CPF VARCHAR(11),
	SEXO VARCHAR(30),
	SENHA VARCHAR(250),
	PAPEL VARCHAR(250)
);

CREATE  TABLE  ENDERECO(
	ENDID SERIAL PRIMARY KEY,
	CEP 	VARCHAR(30)NOT NULL,
	RUA	VARCHAR(250),
	NUMERO INTEGER,
	BAIRRO VARCHAR(250),
	CIDADE VARCHAR(250),
	UF	   VARCHAR(2),
	COMPLEMENTO VARCHAR(250),
	PONTOREFERENCIA VARCHAR(250),
	USERID BIGINT REFERENCES USUARIO(USERID)
);

CREATE  TABLE  EDITORA(
	EDITORAID SERIAL PRIMARY KEY,
	CNPJ 	VARCHAR(250)NOT NULL,
	NOME	VARCHAR(2),
	CEP 	VARCHAR(30)NOT NULL,
	RUA	VARCHAR(250),
	NUMERO INTEGER,
	BAIRRO VARCHAR(250),
	CIDADE VARCHAR(250),
	UF	   VARCHAR(2)
);

CREATE  TABLE  LIVRO(
	LIVROID SERIAL PRIMARY KEY,
	TITULO 	VARCHAR(250)NOT NULL,
	DESCRICAO	VARCHAR(250)NOT NULL,
	PRICE FLOAT NOT NULL,
	ISBN VARCHAR(30) NOT NULL,
	CAPA VARCHAR(255) NOT NULL,
	EDICAO VARCHAR(250),
	ANOPUBLICACAO VARCHAR(30),
	CATEGORIA BIGINT REFERENCES CATEGORIA(CATEGORIAID),
	EDITORAID BIGINT REFERENCES EDITORA(EDITORAID)	
	

);

CREATE  TABLE  ESTOQUE(
	ESTOQUEID SERIAL PRIMARY KEY,
	BOOK 	BIGINT REFERENCES LIVRO(LIVROID),
	QUANTIDADE INT NOT NULL,
	PRATELEIRA VARCHAR(30)
);

CREATE  TABLE  PAGAMENTO(
	PAGAMENTOID SERIAL PRIMARY KEY,
	DESCRICAO 	VARCHAR(250)NOT NULL
);

CREATE  TABLE  PEDIDO(
	PEDIDOID SERIAL PRIMARY KEY,
	USERID  BIGINT REFERENCES USUARIO(USERID),
	TOTAL	FLOAT NOT NULL,
	DATACRIACAO DATE,
	STATUS VARCHAR(100),
	ENDERECO BIGINT REFERENCES ENDERECO(ENDID) ,
	PAGAMENTO BIGINT REFERENCES PAGAMENTO(PAGAMENTOID),
	DATAFECHAMENTO DATE
);

CREATE  TABLE  BOOKPEDIDO(
	BOOKPEDIDOID SERIAL PRIMARY KEY,
	DATAVENDA DATE NOT NULL,
	QUANTIDADE	INTEGER,
	LIVROID BIGINT REFERENCES LIVRO(LIVROID),
	PEDIDOID BIGINT REFERENCES PEDIDO(PEDIDOID)
);

CREATE  TABLE  LIVROAUTOR(
	AUTORID BIGINT,
	LIVROID BIGINT,
	
        FOREIGN KEY (AUTORID) REFERENCES AUTOR(AUTORID),
        FOREIGN KEY (LIVROID) REFERENCES LIVRO(LIVROID)
);




